(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{143:function(t,i,s){},144:function(t,i,s){},145:function(t,i,s){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var e=c(s(36)),a=c(s(37));function c(t){return t&&t.__esModule?t:{default:t}}i.default={data:function(){return{cur:"cart",isWrite:!1,cartBlank:!0,img_path:"http://znswsse.com:8031/",pList:[],btnText:"编辑商品",allCheck:!0,showAlert:!1,startX:0,endX:0,token:localStorage.getItem("token")}},metaInfo:{title:"购物车"},components:{Footer:e.default,Alert:a.default},computed:{allPrice:function(){for(var t=0,i=0;i<this.pList.length;i++)this.pList[i].check&&(t+=this.pList[i].SinglePrice*this.pList[i].ProQuantity);return t},allQuantity:function(){for(var t=0,i=0;i<this.pList.length;i++)this.pList[i].check&&(t+=this.pList[i].ProQuantity);return t}},mounted:function(){this.getPList()},methods:{getPList:function(){var t=this;this.$emit("loadShow",!0),this.axios.get("account/shopping-cart?token="+this.token).then(function(i){if(t.$emit("loadShow",!1),i.data.res_infor.length>0){t.cartBlank=!1,t.pList=i.data.res_infor;for(var s=0;s<t.pList.length;s++)t.$set(t.pList[s],"check",!0);console.log(t.pList)}else t.cartBlank=!0}).catch(function(i){t.$emit("loadErrShow",!0)})},checkItem:function(t){if(t.check)t.check=!1,this.allCheck=!1;else{t.check=!0;for(var i=!0,s=0;s<this.pList.length;s++)this.pList[s].check||(i=!1);this.allCheck=!!i}},checkAll:function(){if(this.allCheck){this.allCheck=!1;for(var t=0;t<this.pList.length;t++)this.pList[t].check=!1}else{this.allCheck=!0;for(var i=0;i<this.pList.length;i++)this.pList[i].check=!0}},goOrder:function(){for(var t=[],i=0;i<this.pList.length;i++)this.pList[i].check&&t.push(this.pList[i].ProId);t.length>0?this.$router.push({path:"/orderDetail",query:{ids:t}}):alert("请选择要购买的商品")},changeNum:function(t,i){var s=this;if(this.$emit("loadShow",!0),t){var e=JSON.stringify({proid:i.ProId,proquantity:1,singleprice:i.SinglePrice,totalprice:i.SinglePrice});this.axios.post("account/shopping-cart?token="+this.token,e).then(function(t){s.getPList()}).catch(function(t){s.$emit("loadErrShow",!0)})}else if(1==i.ProQuantity)this.$emit("loadShow",!1);else{var a=JSON.stringify({proid:i.ProId,proquantity:-1,singleprice:i.SinglePrice,totalprice:i.SinglePrice});this.axios.post("account/shopping-cart?token="+this.token,a).then(function(t){s.getPList()}).catch(function(t){s.$emit("loadErrShow",!0)})}},writeP:function(){if("编辑商品"==this.btnText){this.btnText="完成",this.isWrite=!0,this.allCheck=!1;for(var t=0;t<this.pList.length;t++)this.pList[t].check=!1}else{this.btnText="编辑商品",this.isWrite=!1,this.allCheck=!0;for(var i=0;i<this.pList.length;i++)this.pList[i].check=!0}},showA:function(){for(var t=!1,i=0;i<this.pList.length;i++)this.pList[i].check&&(t=!0);t?this.showAlert=!0:alert("请选择要删除的商品！")},myCloseAlert:function(t){this.showAlert=!1,t&&this.deleteAll()},deleteAll:function(){var t=this,i=[];this.$emit("loadShow",!0);for(var s=0;s<this.pList.length;s++)this.pList[s].check&&i.push(this.pList[s].ProId);var e=JSON.stringify({pro_ids:i});this.axios.post("account/shopping-cart/delete?token="+this.token,e).then(function(i){t.btnText="编辑商品",t.isWrite=!1,t.allCheck=!0;for(var s=0;s<t.pList.length;s++)t.pList[s].check=!0;t.getPList()}).catch(function(i){t.$emit("loadErrShow",!0)})},skip:function(){this.checkSlide()&&this.restSlide()},touchStart:function(t){this.startX=t.touches[0].clientX},touchEnd:function(t){var i=t.currentTarget.parentElement;this.endX=t.changedTouches[0].clientX,0==i.dataset.type&&this.startX-this.endX>30&&(this.restSlide(),i.dataset.type=1),1==i.dataset.type&&this.startX-this.endX<-30&&(this.restSlide(),i.dataset.type=0),this.startX=0,this.endX=0},checkSlide:function(){for(var t=document.querySelectorAll(".cart_item"),i=0;i<t.length;i++)if(1==t[i].dataset.type)return!0;return!1},restSlide:function(){for(var t=document.querySelectorAll(".cart_item"),i=0;i<t.length;i++)t[i].dataset.type=0},deleteItem:function(t){var i=this;this.restSlide();var s=[t.ProId];this.$emit("loadShow",!0);var e=JSON.stringify({pro_ids:s});this.axios.post("account/shopping-cart/delete?token="+this.token,e).then(function(t){i.getPList()}).catch(function(t){i.$emit("loadErrShow",!0)})}}}},146:function(t,i,s){"use strict";s.r(i);var e=s(145),a=s.n(e);for(var c in e)"default"!==c&&function(t){s.d(i,t,function(){return e[t]})}(c);i.default=a.a},161:function(t,i,s){"use strict";var e=function(){var t=this,i=t.$createElement,s=t._self._c||i;return s("div",[s("div",{directives:[{name:"show",rawName:"v-show",value:t.cartBlank,expression:"cartBlank"}],attrs:{id:"page_blank"}},[t._m(0),t._v(" "),s("Footer",{attrs:{cur:t.cur}})],1),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:!t.cartBlank,expression:"!cartBlank"}],attrs:{id:"page_content"}},[s("div",{staticClass:"my_head"},[s("div",{staticClass:"write_p"},[s("a",{on:{click:function(i){t.writeP()}}},[t._v(t._s(t.btnText))])])]),t._v(" "),s("ul",{staticClass:"cart_list"},t._l(t.pList,function(i){return s("li",{staticClass:"cart_item",attrs:{"data-type":"0"}},[s("div",{staticClass:"updiv",on:{"!touchstart":function(i){return t.touchStart(i)},"!touchend":function(i){return t.touchEnd(i)},click:t.skip}},[s("span",{staticClass:"check",class:[!!i.check&&"checked"],staticStyle:{"margin-right":"10px"},on:{click:function(s){s.stopPropagation(),s.preventDefault(),t.checkItem(i)}},model:{value:i.check,callback:function(s){t.$set(i,"check",s)},expression:"p.check"}}),t._v(" "),s("div",{staticClass:"cart_detail"},[s("div",{staticClass:"cart_img"},[s("img",{attrs:{src:t.img_path+i.ProImage}})]),t._v(" "),s("div",{staticClass:"cart_msg"},[s("p",{staticClass:"p_name"},[s("span",{staticClass:"proname"},[t._v(t._s(i.ProName))]),s("br"),s("span",{staticClass:"promodel",staticStyle:{"font-size":"0.8em"}},[t._v("("+t._s(i.ProModel)+")")])]),t._v(" "),s("div",[s("div",{staticClass:"p_price"},[s("b",{staticClass:"price"},[t._v("￥"),s("span",{staticClass:"pri"},[t._v(t._s(i.SinglePrice.toFixed(2)))])])]),t._v(" "),s("div",{staticClass:"p_number"},[s("button",{staticClass:"min adm",on:{click:function(s){t.changeNum(0,i)}}}),s("span",{staticClass:"num"},[t._v(t._s(i.ProQuantity))]),s("button",{staticClass:"add adm",on:{click:function(s){t.changeNum(1,i)}}})])])])])]),t._v(" "),s("div",{staticClass:"downdiv",on:{click:function(s){t.deleteItem(i)}}},[s("span",{staticClass:"delete"}),t._v(" "),s("span",{staticClass:"text"},[t._v("删 除")])])])})),t._v(" "),s("div",{staticClass:"footer_box",staticStyle:{bottom:"51px"}},[s("div",{attrs:{id:"footer"}},[s("div",{staticClass:"cart"},[s("div",[s("span",{staticClass:"check",class:[!!t.allCheck&&"checked"],on:{click:t.checkAll},model:{value:t.allCheck,callback:function(i){t.allCheck=i},expression:"allCheck"}}),t._v(" "),s("p",[t._v("全选")])])]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:!t.isWrite,expression:"!isWrite"}],staticClass:"cart_r r1"},[s("div",{staticClass:"f_item"},[s("p",{staticClass:"price"},[t._v("\n                            总计:\n                            "),s("b",{staticClass:"price"},[t._v("￥"),s("span",{staticClass:"AllPrice"},[t._v(t._s(t.allPrice))])])]),t._v(" "),s("span",{staticStyle:{"font-size":"10px"}},[t._v("(不含运费)")])]),t._v(" "),s("div",{staticClass:"buy f_item"},[s("a",{attrs:{id:"btn"},on:{click:function(i){t.goOrder()}}},[t._v("去结算("),s("span",{staticClass:"nums"},[t._v(t._s(t.allQuantity))]),t._v("件)")])])]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.isWrite,expression:"isWrite"}],staticClass:"cart_r r2"},[s("div",{staticClass:"f_item"}),t._v(" "),s("div",{staticClass:"f_item"},[s("a",{staticClass:"delete",on:{click:function(i){t.showA()}}},[t._v("删除")])])])])]),t._v(" "),s("Footer",{attrs:{cur:t.cur,q:t.allQuantity,c:t.cartBlank}})],1),t._v(" "),s("transition",{attrs:{name:"fade"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.showAlert,expression:"showAlert"}],staticClass:"alert"},[s("Alert",{on:{"on-close":t.myCloseAlert}},[s("p",{attrs:{slot:"delete"},slot:"delete"},[t._v("你确定要删除该地址吗？")])])],1)])],1)},a=[function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"main"},[i("div",{staticClass:"no_data",staticStyle:{border:"1px solid transparent"}},[i("i",{staticClass:"no_cart"}),this._v(" "),i("p",[this._v("您目前还没有选购商品")])])])}];s.d(i,"a",function(){return e}),s.d(i,"b",function(){return a})},215:function(t,i,s){"use strict";var e=s(143);s.n(e).a},217:function(t,i,s){"use strict";var e=s(144);s.n(e).a},92:function(t,i,s){"use strict";s.r(i);var e=s(161),a=s(146);for(var c in a)"default"!==c&&function(t){s.d(i,t,function(){return a[t]})}(c);s(217),s(215);var n=s(0),r=Object(n.a)(a.default,e.a,e.b,!1,null,"a1deb54a",null);i.default=r.exports}}]);